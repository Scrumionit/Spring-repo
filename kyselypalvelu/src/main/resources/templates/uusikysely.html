<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Uusi kysely</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- link to shared stylesheet -->
    <link type="text/css" rel="stylesheet" href="/index.css" />
  </head>

  <body class="app">
    <div class="card-wrapper">
      <div class="card">
        <h1>Uusi kysely</h1>
        <!-- wrap controls in one form, add client-side validation -->
        <form action="/tallennaKysely" method="post" onsubmit="return validateKysely(this);">
          <label for="nimi">Nimi</label>
          <input type="text" name="nimi" required />
          <br/>
          <label for="kuvaus">Kuvaus</label>
          <textarea rows="3" cols="30" name="kuvaus" required></textarea>
          <br/>
          <label for="alkupvm">Alkamisajankohta</label>
          <input type="date" name ="alkupvm" required />
          <br/>
          <label for="loppupvm">Päättymisajankohta</label>
          <input type="date" name="loppupvm" required />
          <br/>
          <div class="actions">
            <input type="submit" value="Tallenna kysely" class="btn btn-primary" />
            <a href="/kyselyt" class="btn btn-secondary">Palaa takaisin</a>
          </div>
        </form>

        <script>
          function validateKysely(form) {
            const requiredFields = form.querySelectorAll('input[required], textarea[required]');
            for (let f of requiredFields) {
              if (!f.value || !f.value.toString().trim()) {
                alert('Täytä kaikki kentät ennen tallennusta.');
                f.focus();
                return false;
              }
            }
            return true;
          }
        </script>
      </div>
    </div>
  </body>
</html>
